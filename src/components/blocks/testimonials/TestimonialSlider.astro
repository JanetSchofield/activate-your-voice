---
// Testimonial Slider Section
// ------------
import Section from '../../ui/Section.astro'
import Row from '../../ui/Row.astro'
import Col from '../../ui/Col.astro'
import Testimonial from '../../ui/Testimonial.astro'

const testimonials = [
  {
    quote: "Voice coaching with Janet has been a revelation to me! I’ve learned so much in a short space of time and am making steady progress. I can hear that my voice is stronger and I’m now speaking from the correct part of my mouth(!). Janet is so knowledgeable, patient and a lovely person who now feels like a friend.",
    name: "Keren Chamberlain",
    role: "",
    stars: 5
  },
  {
    quote: "I regularly work with Janet and practice with speech exercises has made my voice stronger, clearer and more modulated. People have told me that my communication is far more effective.",
    name: "Ingrid",
    role: "Sweden",
    stars: 5
  },
  {
    quote: "Our team coaching session taught us important business principles in a fun and memorable way.",
    name: "EM",
    role: "Macclesfield",
    stars: 5
  },
  {
    quote: "The techniques Janet has taught me have enabled me to communicate not just more effectively but more confidently. Customers and colleagues understand me much more clearly, which is vital for my Sales role.",
    name: "Sam Cordon",
    role: "Sales Executive",
    stars: 5
  },
  {
    quote: "My daughter enjoys her weekly lessons and is keen to achieve and progress further. I would thoroughly recommend to anyone wanting to gain confidence in speaking and achieve results quickly",
    name: "Kate Edwardson",
    role: "",
    stars: 5
  },
  {
    quote: "Janet’s coaching and insight are essential to helping me deliver effectively to the business",
    name: "Veronica",
    role: "FTSE Top 100 Company",
    stars: 5
  },
  {
    quote: "With Janet’s help, my daughter has secured a place at Laine Theatre Arts in Epsom – her first choice. We are very grateful to ‘Activate Your Voice’ for their expertise and support and would not hesitate to recommend them",
    name: "Suzanne Lynn",
    role: "Drama School tuition",
    stars: 5
  },
  {
    quote: "Janet’s voice coaching is outstanding. After only a few weeks, people realised the difference in my voice and the way I present. It is a true pleasure working with Janet",
    name: "Sebastian",
    role: "Scientist at a pharmaceutical company",
    stars: 5
  },
  {
    quote: "Janet’s been a fantastic coach. I originally reached out a few months back to develop my vocal and reading ability. We started off with articulation, pronunciation and breathing exercises which I now practice on a day to day basis. These collectively have helped develop my vocal resonance and clarity when speaking.",
    name: "Ben Horton",
    role: "Software Engineer",
    stars: 5
  },
  {
    quote: "Janet is a very confident voice coach. She has taught me a wide range of vocal exercises and techniques to improve my spoken English and clarity of my voice, as well as the modulation. As a foreign speaker I have found practicing the phonetic sounds invaluable. Janet has improved my confidence and I'd highly recommend her",
    name: "Kongrit Khamkhoon",
    role: "",
    stars: 5
  },
  {
    quote: "We've been very pleased with the sessions our son has been having with Janet. We feel as though his confidence has really come on and Janet does a great job keeping him engaged. We weren't sure about switching to online and although nothing beats face to face, it's remarkable how it can work well online too",
    name: "Debble Powell",
    role: "",
    stars: 5
  },
  {
    quote: "From only a few lessons I noticed improvement in my speech. I became aware of using the techniques Janet has taught me to build a better rapport when speaking on the phone. I would highly recommend recommend Janet, she is competent and enthusiastic",
    name: "Ash Burdett",
    role: "",
    stars: 5
  },
  {
    quote: "I spent a number of years with Janet for both Speech and Drama lessons. These have proved invaluable in my work and also in my spare time. I have no reservations in recommending Janet, my time with her was both enjoyable and educational",
    name: "Christopher Bluff",
    role: "",
    stars: 5
  }
];
---

<Section id="testimonials" padding="none" classes="bg-neutral-50/50 py-6 lg:py-10 overflow-hidden">
	<Row classes="mb-8 lg:mb-12">
		<Col span="12" align="center" classes="max-w-4xl mx-auto">
			<p class="uppercase tracking-[0.3em] text-[10px] lg:text-[11px] font-bold text-neutral-400 mb-4">
				Success stories
			</p>
			<h2 class="text-3xl lg:text-4xl font-bold text-[#1B008A] tracking-tight">
				What our <span class="text-primary-500 font-light">clients say</span>
			</h2>
		</Col>
	</Row>
	
	<div class="relative group container mx-auto px-6 lg:px-12">
		<!-- Navigation Buttons -->
		<button 
			id="testimonial-prev"
			class="absolute -left-2 lg:left-0 top-1/2 -translate-y-1/2 z-30 bg-white p-3 rounded-full shadow-lg text-[#1B008A] hover:bg-primary-500 hover:text-white transition-all opacity-0 group-hover:opacity-100 hidden lg:block"
			aria-label="Previous testimonial"
		>
			<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
			</svg>
		</button>
		<button 
			id="testimonial-next"
			class="absolute -right-2 lg:right-0 top-1/2 -translate-y-1/2 z-30 bg-white p-3 rounded-full shadow-lg text-[#1B008A] hover:bg-primary-500 hover:text-white transition-all opacity-0 group-hover:opacity-100 hidden lg:block"
			aria-label="Next testimonial"
		>
			<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
			</svg>
		</button>

		<!-- Horizontal Scroll Container -->
		<div 
			id="testimonial-container"
			class="flex gap-6 overflow-x-auto snap-x snap-mandatory no-scrollbar pb-8 pt-4 scroll-smooth"
		>
			{testimonials.map((testimonial) => (
				<div class="flex-none w-[300px] sm:w-[350px] lg:w-[400px] snap-start">
					<div class="bg-white p-8 rounded-2xl shadow-[0_10px_40px_-15px_rgba(0,0,0,0.1)] border border-neutral-100/50 h-full flex flex-col justify-between">
						<div>
							<p class="text-neutral-600 text-sm italic font-medium leading-relaxed mb-10 whitespace-pre-line">
								"{testimonial.quote}"
							</p>
						</div>
						<div class="flex items-center gap-4 mt-auto pt-4 border-t border-neutral-50">
							<div class="w-10 h-10 bg-primary-100/50 rounded-full flex items-center justify-center text-primary-600 font-bold text-xs uppercase">
								{testimonial.name.split(' ').map(n => n[0]).join('')}
							</div>
							<div>
								<h4 class="text-[#1B008A] font-bold text-sm leading-none">{testimonial.name}</h4>
								{testimonial.role && <p class="text-neutral-400 text-[10px] uppercase tracking-wider font-bold mt-0.5">{testimonial.role}</p>}
							</div>
						</div>
					</div>
				</div>
			))}
		</div>
	</div>
</Section>

<style>
	.no-scrollbar::-webkit-scrollbar {
		display: none;
	}
	.no-scrollbar {
		-ms-overflow-style: none;
		scrollbar-width: none;
	}
</style>

<script>
	function initTestimonialSlider() {
		const container = document.getElementById('testimonial-container');
		const prevBtn = document.getElementById('testimonial-prev');
		const nextBtn = document.getElementById('testimonial-next');

		if (container && prevBtn && nextBtn) {
			const scrollAmount = 400;

			nextBtn.addEventListener('click', () => {
				container.scrollBy({ left: scrollAmount, behavior: 'smooth' });
			});

			prevBtn.addEventListener('click', () => {
				container.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
			});

			const toggleButtons = () => {
				if (container.scrollLeft <= 5) {
					prevBtn.classList.add('lg:opacity-0', 'lg:pointer-events-none');
				} else {
					prevBtn.classList.remove('lg:opacity-0', 'lg:pointer-events-none');
				}

				if (container.scrollLeft + container.clientWidth >= container.scrollWidth - 10) {
					nextBtn.classList.add('lg:opacity-0', 'lg:pointer-events-none');
				} else {
					nextBtn.classList.remove('lg:opacity-0', 'lg:pointer-events-none');
				}
			};

			container.addEventListener('scroll', toggleButtons);
			toggleButtons();
			window.addEventListener('resize', toggleButtons);
		}
	}

	document.addEventListener('DOMContentLoaded', initTestimonialSlider);
	document.addEventListener('astro:page-load', initTestimonialSlider);
	initTestimonialSlider();
</script>
