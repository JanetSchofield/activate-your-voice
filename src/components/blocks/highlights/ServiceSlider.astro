---
// Service Slider Section
// ------------
import Section from '../../ui/Section.astro'
import Row from '../../ui/Row.astro'
import Col from '../../ui/Col.astro'

const services = [
  {
    title: "Public Speaking Training & Presentations",
    description: "We specialise in providing Speech, Vocal Enhancement, Drama, Acting and Oral Communication lessons for both corporate and individual clients.",
    image: "/presentation.jpg",
    link: "/public-speaking"
  },
  {
    title: "Exams & Qualifications",
    description: "Activate Your Voice can prepare you for professional exams through The London College of Music at the University of West London.",
    image: "/exams.jpg",
    link: "/exams-qualifications"
  },
  {
    title: "Elocution Lessons",
    description: "Our lessons provide you with exercises to improve the clarity of your speech, enhance your vocal delivery and improve your overall communication.",
    image: "/elocution-lessons.jpg",
    link: "/elocution"
  },
  {
    title: "Speech & Drama",
    description: "Learn to enunciate clearly and confidently via individually tailored tuition in Speech and Drama.",
    image: "/drama-tuition.jpg",
    link: "/speech-drama"
  },
  {
    title: "Corporate & Business Coaching",
    description: "Our business coaching is designed for professionals who want to command attention, influence their audience, and lead with confidence.",
    image: "/corporate.jpg",
    link: "/business-coaching"
  },
  {
    title: "Acting Coaching Tuition",
    description: "Our one-to-one coaching provides you with the tools and techniques to fully embody a character and give a polished performance.",
    image: "/acting.jpg",
    link: "/acting-coaching"
  }
];
---

<Section id="services" padding="none" classes="bg-white overflow-hidden pt-8 lg:pt-12 pb-4 lg:pb-6">
	<Row classes="mb-6 lg:mb-8">
		<Col span="12" align="center" classes="max-w-4xl mx-auto">
			<h2 class="text-3xl lg:text-4xl font-bold text-[#1B008A] tracking-tight mb-4">
				A masterclass in <span class="text-primary-500 font-light">vocal communication</span>
			</h2>
			<p class="text-neutral-500 text-sm font-medium">
				Our 1-2-1 tuition covers all aspects of voice coaching and drama training, including the following:
			</p>
		</Col>
	</Row>
	
	<div class="relative group">
		<!-- Navigation Buttons -->
		<button 
			id="prev-slide"
			class="absolute left-4 top-1/2 -translate-y-1/2 z-30 bg-white/90 p-3 rounded-full shadow-lg text-[#1B008A] hover:bg-primary-500 hover:text-white transition-all opacity-0 group-hover:opacity-100 hidden lg:block"
			aria-label="Previous slide"
		>
			<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
			</svg>
		</button>
		<button 
			id="next-slide"
			class="absolute right-4 top-1/2 -translate-y-1/2 z-30 bg-white/90 p-3 rounded-full shadow-lg text-[#1B008A] hover:bg-primary-500 hover:text-white transition-all opacity-0 group-hover:opacity-100 hidden lg:block"
			aria-label="Next slide"
		>
			<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
			</svg>
		</button>

		<!-- Horizontal Scroll Container -->
		<div 
			id="slider-container"
			class="flex gap-6 overflow-x-auto snap-x snap-mandatory no-scrollbar px-6 lg:px-12 pb-12 pt-4 scroll-smooth"
		>
			{services.map((service) => (
				<div class="flex-none w-[280px] sm:w-[320px] lg:w-[350px] snap-start bg-white rounded-lg shadow-[0_10px_40px_-15px_rgba(0,0,0,0.1)] overflow-hidden border border-neutral-100/50 flex flex-col group/card hover:shadow-[0_20px_50px_-12px_rgba(0,0,0,0.15)] transition-all duration-500 translate-y-0 hover:-translate-y-2">
					<div class="h-52 overflow-hidden relative">
						<img 
							src={service.image} 
							alt={service.title} 
							class="w-full h-full object-cover group-hover/card:scale-110 transition-transform duration-700"
						/>
						<div class="absolute inset-0 bg-neutral-900/5 group-hover/card:bg-transparent transition-colors duration-500"></div>
					</div>
					
					<div class="p-6 sm:p-8 flex flex-col flex-grow">
						<h3 class="text-lg font-bold text-[#1B008A] mb-3 leading-[1.3] group-hover/card:text-primary-500 transition-colors duration-300 min-h-[3rem] flex items-start">
							{service.title}
						</h3>
						<p class="text-neutral-500 text-xs sm:text-sm leading-relaxed mb-6 flex-grow">
							{service.description}
						</p>
						<a 
							href={service.link} 
							class="text-[#1B008A] font-bold text-xs tracking-wider uppercase hover:text-primary-600 transition-colors inline-flex items-center"
						>
							Read More
							<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 ml-2 group-hover/card:translate-x-1 transition-transform" viewBox="0 0 20 20" fill="currentColor">
								<path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
							</svg>
						</a>
					</div>
				</div>
			))}
		</div>
	</div>
</Section>

<style>
	.no-scrollbar::-webkit-scrollbar {
		display: none;
	}
	.no-scrollbar {
		-ms-overflow-style: none;
		scrollbar-width: none;
	}
</style>

<script>
	function initSlider() {
		const container = document.getElementById('slider-container');
		const prevBtn = document.getElementById('prev-slide');
		const nextBtn = document.getElementById('next-slide');

		if (container && prevBtn && nextBtn) {
			const scrollAmount = 350; // Width of a card + gap roughly

			nextBtn.addEventListener('click', () => {
				container.scrollBy({ left: scrollAmount, behavior: 'smooth' });
			});

			prevBtn.addEventListener('click', () => {
				container.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
			});

			// Hide/show buttons based on scroll position
			const toggleButtons = () => {
				if (container.scrollLeft <= 0) {
					prevBtn.classList.add('lg:opacity-0', 'lg:pointer-events-none');
				} else {
					prevBtn.classList.remove('lg:opacity-0', 'lg:pointer-events-none');
				}

				if (container.scrollLeft + container.clientWidth >= container.scrollWidth - 10) {
					nextBtn.classList.add('lg:opacity-0', 'lg:pointer-events-none');
				} else {
					nextBtn.classList.remove('lg:opacity-0', 'lg:pointer-events-none');
				}
			};

			container.addEventListener('scroll', toggleButtons);
			
			// Initial check
			toggleButtons();

			// Also check on window resize as it might change scroll status
			window.addEventListener('resize', toggleButtons);
		}
	}

	// Initialize on page load
	document.addEventListener('DOMContentLoaded', initSlider);
	// Handle Astro View Transitions if enabled
	document.addEventListener('astro:page-load', initSlider);
	// Immediate call as well (for standard script execution)
	initSlider();
</script>
